#!/usr/bin/env ruby

require "pidgin2adium"
require "optparse"

options = {}

parser = OptionParser.new do |parser|
  parser.banner = "Usage: #{File.basename($0)} -i PIDGIN_LOG_DIR"

  parser.on('-i', '--in IN_DIR', 'Directory where pidgin logs are stored') do |in_directory|
    options[:in_directory] = in_directory
  end

  parser.on("-v", "--version", "Show version information") do
    puts "Pidgin2Adium, version #{Pidgin2Adium::VERSION}"
    exit
  end

  parser.on_tail("-h", "--help", "Show this message") do
    puts parser
    exit
  end
end

parser.parse!

if options[:in_directory]
  runner = Pidgin2Adium::Runner.new(options[:in_directory])
  runner.run
else
  puts "-i/--in argument is required! Run with --help for more information"
  exit 1
end
